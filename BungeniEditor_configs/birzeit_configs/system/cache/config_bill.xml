<?xml version="1.0" encoding="UTF-8"?>
<!--
This is the freemarker template for the pipeline generator
It is used to generate the config_doctype.xml used to translate the
ODT -> Akoma Ntoso
-->
<config name="bill" for="bill">
    <!-- 
        General Properties for the translator 
        -->
    <properties>
            <!-- resource bundle -->
            <entry key="resourceBundlePath">localisation.messages.LabelsBundle</entry>
            <!-- parameter to specify cached pipeline property -->
            <entry key="cachePipelineXSLT">false</entry>
             <entry key="inputXmlSource">ODF</entry>
    </properties>


    <!-- Specfies the schema for the target xml document -->
    <schema href="file:/C:/Users/bzuadmin/Desktop/BungeniClientEditor/BungeniEditorClient/dist/../../BungeniEditor_configs/development_configs/system/transformer/schema/akn-subschema-3195136.xsd" />

    <!-- This steps are performed BEFORE the below regex replacement -->
    <input>
        <xslt step="1" name="appendBungeniNS" href="file:/C:/Users/bzuadmin/Desktop/BungeniClientEditor/BungeniEditorClient/dist/../../BungeniEditor_configs/development_configs/system/transformer/xsl/add_bungeni_ns.xsl"/>
        <!-- Add RDF ns -->

         <xslt step="2" name="appendRDFNS" href="file:/C:/Users/bzuadmin/Desktop/BungeniClientEditor/BungeniEditorClient/dist/../../BungeniEditor_configs/development_configs/system/transformer/xsl/add_rdf_ns.xsl"/>
        <!-- Extract the styles -->
        <xslt step="3" name="mergeStyles" href="file:/C:/Users/bzuadmin/Desktop/BungeniClientEditor/BungeniEditorClient/dist/../../BungeniEditor_configs/development_configs/system/transformer/xsl/merge_styles.xsl"/>
        <!-- Transform the document to the META Language -->
        <!-- custom steps follow -->
        <!--{UNCOMMENT_MERGE_OPEN}
        <xslt step="99" name="odf_meta_lang_master" href="file:/C:/Users/bzuadmin/Desktop/BungeniClientEditor/BungeniEditorClient/dist/../../BungeniEditor_configs/development_configs/system/cache/odf_meta_config_bill.xsl"/>
        {UNCOMMENT_MERGE_CLOSE}-->
    </input>
    
    <replacements>
        <!-- Normalise the produced ODF ref elements -->
        <replacement step="1" name="replacerefmarkstart"
            pattern="&lt;text:reference-mark-start([^\/]+)/&gt;" replacement="&lt;ref$1&gt;"/>
        <replacement step="2" name="replacerefmarkend"
            pattern="&lt;text:reference-mark-end([^\/]+)/&gt;" replacement="&lt;/ref&gt;"/>
        <!-- Normalise the produced ODF bookmark elements -->
        <replacement step="3" name="bookmarkstart" pattern="&lt;text:bookmark-start([^\/]+)/&gt;"
            replacement="&lt;ref$1&gt;"/>
        <replacement step="4" name="bookmarkend" pattern="&lt;text:bookmark-end([^\/]+)/&gt;"
            replacement="&lt;/ref&gt;"/>
        <!-- Delete the empty lines -->
        <replacement step="5" name="replaceemptyline" pattern="\n" replacement=""/>
    </replacements>
  
    <!-- This steps are performed AFTER the above regex replacement -->
    <output>
        <!-- Normalise the produced META document -->
        <xslt step="1" name="MetaLanguageNormalisation"
            href="file:/C:/Users/bzuadmin/Desktop/BungeniClientEditor/BungeniEditorClient/dist/../../BungeniEditor_configs/development_configs/system/transformer/xsl/meta_language_normalization.xsl"/>
        <!-- Add the Metalex namespace -->
        <xslt step="2" name="MetaLanguageAddNamespaceMetalex"
            href="
Expression cache_trans_path is undefined on line 62, column 21 in config_tmpl.xml.
The problematic instruction:
----------
==> ${cache_trans_path} [on line 62, column 19 in config_tmpl.xml]
----------

Java backtrace for programmers:
----------
freemarker.core.InvalidReferenceException: Expression cache_trans_path is undefined on line 62, column 21 in config_tmpl.xml.
	at freemarker.core.TemplateObject.assertNonNull(TemplateObject.java:125)
	at freemarker.core.Expression.getStringValue(Expression.java:118)
	at freemarker.core.Expression.getStringValue(Expression.java:93)
	at freemarker.core.DollarVariable.accept(DollarVariable.java:76)
	at freemarker.core.Environment.visit(Environment.java:221)
	at freemarker.core.MixedContent.accept(MixedContent.java:92)
	at freemarker.core.Environment.visit(Environment.java:221)
	at freemarker.core.Environment.process(Environment.java:199)
	at freemarker.template.Template.process(Template.java:259)
	at org.bungeni.editor.system.ConfigTemplateGenerator.process(ConfigTemplateGenerator.java:85)
	at org.bungeni.editor.system.StartupConfigGenerator.startupGenerate(StartupConfigGenerator.java:267)
	at org.bungeni.editor.BungeniEditorClient$2.run(BungeniEditorClient.java:273)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:646)
	at java.awt.EventQueue.access$000(EventQueue.java:84)
	at java.awt.EventQueue$1.run(EventQueue.java:607)
	at java.awt.EventQueue$1.run(EventQueue.java:605)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:616)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
